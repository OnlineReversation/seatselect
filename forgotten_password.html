<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <title>Forgot Password</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
    <link rel="stylesheet" href="login_page.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery-1.9.1.min.js" defer=""></script>

    <link rel="icon" href="images/favicon.jpg">
</head>

<body class="u-body u-xl-mode" data-lang="en">
    <header class="u-clearfix u-grey-50 u-header">
        <div class="u-clearfix u-sheet">
            <a href="#" class="u-image u-logo">
                <img src="images/logo-removebg-preview.png" class="u-logo-image">
            </a>
        </div>
    </header>

    <section class="u-align-center u-section-1">
        <div class="u-clearfix u-sheet">
            <h2>Forgot Password</h2>

            <div class="u-form u-form-1">
                <form action="api/check_security_answer.php" method="POST" class="u-form-spacing-10 u-form-vertical">
                    <div class="u-form-group">
                        <label class="u-label">Email *</label>
                        <input type="email" id="user_email" name="user_email" class="u-input" required>
                    </div>
                    <div class="u-form-group">
                        <label class="u-label">Security Question *</label>
                        <select id="security_question" name="security_question" class="u-input" required>
                            <option value="">Select a question...</option>
                            <option value="pet">What is your first pet's name?</option>
                            <option value="mother_maiden">What is your mother's maiden name?</option>
                            <option value="first_school">What was your first school's name?</option>
                        </select>
                    </div>
                    <div class="u-form-group">
                        <label class="u-label">Security Answer *</label>
                        <input type="text" id="security_answer" name="security_answer" class="u-input" required>
                    </div>
                    <div class="u-align-left u-form-group u-form-submit">
                        <button type="submit" class="u-btn u-btn-submit">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <footer class="u-align-center u-footer u-grey-80">
        <div class="u-sheet">
            <p class="u-small-text">Software Project Engineering RGU 2025</p>
        </div>
    </footer>

    <script>
        // Получаем параметры из URL
        const params = new URLSearchParams(window.location.search);

        if (params.has('error')) {
            const errorMessage = params.get('error');
            const answerField = document.getElementById('security_answer');
            answerField.value = errorMessage; // Записываем ошибку в поле ответа
            answerField.style.color = 'red'; // Меняем цвет текста на красный
        }

        if (params.has('user_email')) {
            document.getElementById('user_email').value = params.get('user_email');
        }

        if (params.has('question')) {
            document.getElementById('security_question').value = params.get('question');
        }
    </script>
</body>

</html>